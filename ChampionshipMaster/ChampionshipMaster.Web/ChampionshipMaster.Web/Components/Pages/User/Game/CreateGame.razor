@page "/createGame"
@using ChampionshipMaster.SHARED.DTO
@using ChampionshipMaster.Web.Services
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using Radzen
@using Radzen.Blazor

@rendermode InteractiveServer
@inherits ComponentBase

<div class="form-container">
    <RadzenTemplateForm TItem="GameDto" Data="@game" Submit="@OnSubmit" InvalidSubmit="@OnInvalidSubmit">
        <div class="form-row">
            <div class="form-group half-width">
                <RadzenLabel Text="Game Name" Class="form-label" />
                <RadzenTextBox @bind-Value="game.Name" Style="width: 100%;" Class="form-control" />
                <RadzenRequiredValidator Component="@(nameof(game.Name))" Text="Game Name is required" />
            </div>
            <div class="form-group half-width">
                <RadzenLabel Text="Game Type" Class="form-label" />
                <RadzenDropDown @bind-Value="game.GameTypeName" Data="gameTypes.Select(x => x.Id).ToList()" Style="width: 100%;" Class="form-control" />
                <RadzenRequiredValidator Component="@(nameof(game.GameTypeName))" Text="Game Type is required" />
            </div>
        </div>
        <div class="form-row">
            <div class="form-group half-width">
                <RadzenLabel Text="Date" Class="form-label" />
                <RadzenDatePicker Class="form-control"
                                  ShowTime="true"
                                  HourFormat="12"
                                  DateFormat="MM/dd/yyyy h:mm tt"
                                  @bind-Value="game.Date"
                                  Style="width: 100%;" />
            </div>
        </div>
        <div class="form-actions">
            <RadzenButton ButtonType="ButtonType.Submit" Icon="save" Text="Save" Style="margin-right: 10px;" Class="btn btn-primary" />
            <RadzenButton ButtonType="ButtonType.Reset" Icon="refresh" Text="Reset" Class="btn btn-secondary" />
        </div>
    </RadzenTemplateForm>

    <RadzenNotification />

    @if (!isLogged)
    {
        <div class="alert alert-warning">
            You are not logged in. Please log in to create a game.
        </div>
    }
</div>
