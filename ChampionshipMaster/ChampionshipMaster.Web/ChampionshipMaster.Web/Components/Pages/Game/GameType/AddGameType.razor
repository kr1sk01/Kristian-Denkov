@page "/addgametype"
@inject HttpClient httpClient
@rendermode InteractiveServer


<center><RadzenTemplateForm Style="width:60%;" TItem="GameType" Data=@model Submit=@OnSubmit InvalidSubmit=@OnInvalidSubmit class="custom-form-style">
        @if (showError)
        {
            <RadzenAlert Variant="@Variant.Filled" AlertStyle=@AlertStyle.Primary Size=@AlertSize.Small Shade="Shade.Lighter" AllowClose=false>
                <RadzenText TagName="TagName.P">@errorMessage</RadzenText>
                </RadzenAlert>
        }
        <RadzenStack Gap="1rem">
            <RadzenFormField Text="Game Type Name" Variant="@variant">
                <ChildContent>
                    <RadzenTextBox Name="GameTypeName" @bind-Value=@model.Name />
                </ChildContent>
                <Helper>
                    <RadzenRequiredValidator Component="GameTypeName" Text="Game Type Name is required." />
                </Helper>
            </RadzenFormField>
            <RadzenFormField Text="Max Points" Variant="@variant">
                <ChildContent>
                    <RadzenNumeric Min="1" Max="10" @bind-Value=@model.MaxPoints InputAttributes="@(new Dictionary<string,object>(){ { "aria-label", "enter value" }})" />
                </ChildContent>
            </RadzenFormField>
            <RadzenButton ButtonType="ButtonType.Submit" Text="Log In"></RadzenButton>
        </RadzenStack>
    </RadzenTemplateForm>
</center>


@code {
    Variant variant = Variant.Outlined;
    private GameType model = new GameType();
    private string? errorMessage;
    private bool showError = false;


    void OnSubmit(GameType model)
    {

        if (model.Name.Length <= 3 || model.MaxPoints <= 0)
        {
            showError = true;
            errorMessage = "Invalid Data!";
        }
        else
        {
            showError = false;
            errorMessage = "";
            //POST DATA
        }
    }

    void OnInvalidSubmit(FormInvalidSubmitEventArgs args)
    {
        showError = true;
        errorMessage = "Invalid Data!";
    }
}